---
import Global from "@/layouts/global.astro";
import { buttonVariants } from "@/components/ui/button";
import { cn } from "@/lib/utils";
import { UserMenu } from "@/components/user-menu";

const session = await Astro.locals.auth.validate();
---

<Global title="dsads">
  <div class="h-vh flex flex-col items-center justify-center">
    <h1 class="text-2xl mb-2">Astro</h1>
    {
      session ? (
        <UserMenu
          client:idle
          avatarUrl={session.user.avatarUrl}
          name={session.user.displayName || session.user.discordUsername}
        />
      ) : (
        <a href="/auth/discord" class={cn(buttonVariants(), "mt-4")}>
          Login with discord
        </a>
      )
    }
  </div>
</Global>
